<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>morse code converter demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/assets/css/style-demo-morse_code_converter.css">
    <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:400,400italic,700,700italic&amp;subset=latin,greek,cyrillic" rel="stylesheet" type="text/css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>  
  </head>

  <body>
    <div class="terminal" id="Terminal">
      <div class="console-line">
        <div class="textsize-float">
          <a href="{{ url_for('home') }}" class="center">
            <img src="../static/assets/svg/return-home.svg" class="svg-whitened align-middle" alt="a line draw image of a box contain left-pointed arrow, represents returns to home page." height="30">
          </a>
          this is the demo of morse code converter.
        </div>
        <a href="#popup-box-info-1" class="center" style="float: right; margin: 3px;">
          <img src="../static/assets/svg/info.svg" class="svg-whitened align-middle" alt="a line draw image of a box contain a letter i, represents show game infomation." height="30">
        </a>
        <div style="width: 2rem;"></div>
        <a href="{{ url_for('gate_morse_code_converter') }}" class="center" title="clear history of conversion." style="float: right; margin: 3px;">
          <img src="../static/assets/svg/eraser.svg" class="svg-whitened align-middle" alt="a line draw image of a eraser, represents clear history of conversion." height="30">
        </a>
        
        <div id="popup-box-info-1" class="overlay">
          <div class="popup">
            <h2>Converter introduction - 1</h2>
            <a class="close" href="#">&times;</a>
            <div class="popup-text textsize-float">
International Morse code is composed of five elements:
dot:            short mark, dot or dit: one time unit long.
dash:           long mark, dash or dah: three time units long.
inter gap:      inter-element gap(between dots & dashs): one unit long.
short gap:      short gap (between letters): three time units long.
medium gap:     medium gap (between words): seven time units long.

a `time unit` in this context is a letter.
          </div>
            <div class="popup-button">
              <a href="#popup-box-info-2" class="center">
                <img src="../static/assets/svg/arrow-right.svg" class="svg-whitened align-middle" alt="a line draw image of a box contain a letter i, represents show game infomation." height="30">
              </a>
            </div>
          </div>
        </div>
        <div id="popup-box-info-2" class="overlay">
          <div class="popup">
            <h2>Converter introduction - 2</h2>
            <a class="close" href="#">&times;</a>
            <div class="popup-text textsize-float">
example:        
convert text: 'test msg' into morse code will be:
'-   .   . . .   -       - -   . . .   - - .'
^   ^    ^          ^               ^
|   ||   |          |               |
dash dot inter gap  medium gap      short gap
            </div>
            <div class="popup-button">
              <a href="#popup-box-info-1" class="center">
                <img src="../static/assets/svg/arrow-left.svg" class="svg-whitened align-middle" alt="a line draw image of a box contain a letter i, represents show game infomation." height="30">
              </a>
              <div style="width: 2rem;"></div>
              <a href="#popup-box-info-3" class="center">
                <img src="../static/assets/svg/arrow-right.svg" class="svg-whitened align-middle" alt="a line draw image of a box contain a letter i, represents show game infomation." height="30">
              </a>
            </div>
          </div>
        </div>
        <div id="popup-box-info-3" class="overlay">
          <div class="popup">
            <h2>Converter introduction - 3</h2>
            <a class="close" href="#">&times;</a>
            <div class="popup-text textsize-float">
in other words:
'-   .   . . .   -       - -   . . .   - - .'
't...e...  s  ...t....... m ...  s  ...  g  '
(here uses '.' to replace spaces for clarification)
t converts into '-', this is `dash`
e converts into '.', this is `dot`
s converts into '. . .', with a space(inter gap) between morse codes
spaces(three) in between two letter(t and e in test) is `short gap`
spaces(seven) in between two word(test and msg) is `medium gap`
            </div>
            <div class="popup-button">
              <a href="#popup-box-info-2" class="center">
                <img src="../static/assets/svg/arrow-left.svg" class="svg-whitened align-middle" alt="a line draw image of a box contain a letter i, represents show game infomation." height="30">
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="terminal-history" id="terminal-history">
        <div class="terminal-line">
          <p class="textsize-float">{{ terminal_lines }}</p>
        </div>
      </div>

      <div class="content" id="Content">
        <div class="consoleInput-undefined">
          <form method="post" id="input-form">
            <label class="textsize-float">enter text to convert into morse code: </label>
            <br>
            <label class="textsize-float">></label>
            <label class="input-sizer" data-value="">
              <!-- autofocus cite: https://stackoverflow.com/questions/26790990/html-input-always-in-focus -->
              <textarea 
              name="user_input" 
              id="user_input"
              type="text" 
              oninput="this.parentNode.dataset.value = this.value" 
              autocomplete="off" 
              autocorrect="off" 
              autocapitalize="off" 
              spellcheck="false" 
              size="1" 
              rows="5"
              value="" 
              autofocus
              ></textarea>
            </label>
            <input type="submit" value="" class="input-button">
          </form>
        </div>
      </div>
    </div>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!-- cite: https://www.youtube.com/watch?v=ATEGpAb8GWI&ab_channel=Pingcode -->
    <script type="text/javascript">
      $(document).ready(function() {
        const InputForm = document.getElementById("input-form")
        const Terminal = document.getElementById("terminal-history")
        InputForm.onsubmit = function(event) {
          event.preventDefault();
          fetch("{{ url_for('demo_morse_code_converter') }}", {
            method: "GET"
          })
          .then(() => {
            fetch("{{ url_for('demo_morse_code_converter_input_receive') }}", {
              method: "GET"
            })
            .then(response => {
              return response.text();
            })
            .then(html =>{
              Terminal.innerHTML = html;
            })
            .then(InputForm.reset())
          })
        }
      });

      // must have the line below so server will get value enter by user(??)
      $(document).ready(function() {
        $('form').submit(function(event) {
            event.preventDefault();
            $.ajax({
              type: 'POST',
              url: '{{ url_for("demo_morse_code_converter") }}',
              data: $('form').serialize(),
              success: function() {
                $('user_input').val('');
              }
            });
        });
      });
      
      // cite: https://stackoverflow.com/questions/8934088/how-to-make-enter-key-in-a-textarea-submit-a-form 
      $("#user_input").keypress(function (e) {
        if(e.which === 13 && !e.shiftKey) {
          e.preventDefault();
          $(this).closest("form").submit();
        }
      });
    </script>
  </body>
</html>